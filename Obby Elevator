-- Instances:

local ObbyElevator = Instance.new("ScreenGui")
local WinButton = Instance.new("ImageButton")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

--Properties:

ObbyElevator.Name = "Obby Elevator"
ObbyElevator.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ObbyElevator.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

WinButton.Name = "WinButton"
WinButton.Parent = ObbyElevator
WinButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
WinButton.BackgroundTransparency = 1.000
WinButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
WinButton.BorderSizePixel = 0
WinButton.Position = UDim2.new(0.897782445, 0, 0.18875502, 0)
WinButton.Size = UDim2.new(0.068, 0, 0.116, 0)
WinButton.Image = "http://www.roblox.com/asset/?id=953596610"

UIAspectRatioConstraint.Parent = WinButton
UIAspectRatioConstraint.AspectRatio = 0.967

--Functions

local player = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")
local char = player.Character or player.CharacterAdded:Wait()
local humanRoot = char:WaitForChild("HumanoidRootPart")
local button = script.Parent

local dragToggle
local dragStart
local startPos
local canClick

local function win()
	local player = game:GetService("Players").LocalPlayer
	local humanRoot = player.Character.HumanoidRootPart

	local map
	local mapKill

	for num = 1, 30 do
		if workspace:FindFirstChild("map"..num) then
			map = workspace:FindFirstChild("map"..num)
		end
	end

	if map then
		firetouchinterest(humanRoot, map.MoneyModel.MoneyPart, 1)
	end
end

local function updateInput(input)
	local delta = input.Position - dragStart
	local position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	WinButton.Position = position
end

canClick = WinButton.MouseButton1Click:Connect(win)

WinButton.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragToggle = true
		dragStart = input.Position
		startPos = WinButton.Position
	end
end)

WinButton.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragToggle = false
		if not canClick then
			canClick = WinButton.MouseButton1Click:Connect(win)
		end
	end
end)

UIS.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		if dragToggle then
			updateInput(input)
			if canClick then canClick:Disconnect() canClick = nil end
		end
	end
end)
